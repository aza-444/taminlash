
{% extends 'base.html' %}

{% block content %}

<!-- TOP CAROUSEL -->
<div class="top-carousel container">
    <div class="carousel swiper heroSwiper">
        <div class="swiper-wrapper">
            {% for slide in carousel_slides %}
            <div class="swiper-slide top-carousel__item">
                {% if slide.image %}
                <img src="{{ slide.image.url }}" alt="{{ slide.title }}">
                {% else %}
                <img src="/static/images/default.jpg" alt="Default Slide">
                {% endif %}
                <div class="top-carousel__content">
                    <h2>{{ slide.title|default:"Slayder qo‘shilmagan" }}</h2>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    </div>
</div>

<!-- QUICK LINKS -->
<section class="py-5">
    <div class="container">
        <div class="quick-links-grid">
            {% for link in quick_links %}
            <a href="{{ link.link }}" class="quick-link-card">
                <div class="quick-link-icon">
                    {% if link.icon %}
                    <img src="{{ link.icon.url }}" alt="{{ link.title }}">
                    {% else %}
                    <div class="quick-link-empty"></div>
                    {% endif %}
                </div>
                <p class="quick-link-title">{{ link.title }}</p>
            </a>
            {% empty %}
            <p>Quick links mavjud emas.</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- NEWS -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="section-title"><h2>PRESS MARKAZI</h2></div>
        <div class="row g-4">
            {% for n in latest_news %}
            <div class="col-md-4">
                <div class="news-card">
                    {% if n.image %}
                    <img src="{{ n.image.url }}" class="news-img" alt="{{ n.title }}">
                    {% endif %}
                    <div class="p-3">
                        <small class="text-muted">{{ n.published_date|date:"d M Y" }}</small>
                        <h5>{{ n.title }}</h5>
                        <p>{{ n.excerpt|truncatewords:20 }}</p>
                    </div>
                </div>
            </div>
            {% empty %}
            <p>Yangiliklar mavjud emas.</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- STATS -->
<section class="py-5">
    <div class="container">
        <div class="section-title"><h2>ASOSIY KO‘RSATKICHLAR</h2></div>
        <div class="stats-grid">
            {% for i in key_indicators %}
            <div class="stats-card">
                <div class="stats-value">{{ i.value }}</div>
                <div class="stats-unit">{{ i.unit }}</div>
                <div class="stats-title">{{ i.title }}</div>
            </div>
            {% empty %}
            <p>Ko‘rsatkichlar mavjud emas.</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- GOVERNMENT LINKS -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="section-title"><h2>FOYDALI DAVLAT SAYTLARI</h2></div>
        <div class="gov-grid">
            {% for g in government_links %}
            <a href="{{ g.url }}" target="_blank" class="gov-card">
                <div class="gov-logo">
                    {% if g.logo %}
                    <img src="{{ g.logo.url }}" alt="{{ g.name }}">
                    {% endif %}
                </div>
                <p>{{ g.name }}</p>
            </a>
            {% empty %}
            <p>Davlat saytlari mavjud emas.</p>
            {% endfor %}
        </div>
    </div>
</section>

{% endblock content %}

{% block extra_js %}
<script>
    const swiper = new Swiper('.heroSwiper', {
        loop: true,
        autoplay: { delay: 5000 },
        pagination: { el: '.swiper-pagination', clickable: true },
        navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
    });
</script>
{% endblock extra_js %}

